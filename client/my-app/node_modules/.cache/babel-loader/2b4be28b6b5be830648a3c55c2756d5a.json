{"ast":null,"code":"/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isPrimitive } from '../lib/parts.js';\nimport { directive, NodePart } from '../lit-html.js'; // For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\n\nconst previousValues = new WeakMap();\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\n\nexport const unsafeHTML = directive(value => part => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) && value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value; // innerHTML casts to string internally\n\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {\n    value,\n    fragment\n  });\n});","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;AAcA,SAAQA,WAAR,QAA0B,iBAA1B;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAwC,gBAAxC,C,CAOA;AACA;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,IAAIC,OAAJ,EAAvB;AAEA;;;;;;;;AAOA,OAAO,MAAMC,UAAU,GAAGJ,SAAS,CAAEK,KAAD,IAAqBC,IAAD,IAAqB;AAC3E,MAAI,EAAEA,IAAI,YAAYL,QAAlB,CAAJ,EAAiC;AAC/B,UAAM,IAAIM,KAAJ,CAAU,8CAAV,CAAN;AACD;;AAED,QAAMC,aAAa,GAAGN,cAAc,CAACO,GAAf,CAAmBH,IAAnB,CAAtB;;AAEA,MAAIE,aAAa,KAAKE,SAAlB,IAA+BX,WAAW,CAACM,KAAD,CAA1C,IACAA,KAAK,KAAKG,aAAa,CAACH,KADxB,IACiCC,IAAI,CAACD,KAAL,KAAeG,aAAa,CAACG,QADlE,EAC4E;AAC1E;AACD;;AAED,QAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACAF,UAAQ,CAACG,SAAT,GAAqBV,KAArB,CAb2E,CAapC;;AACvC,QAAMM,QAAQ,GAAGE,QAAQ,CAACG,UAAT,CAAoBJ,QAAQ,CAACK,OAA7B,EAAsC,IAAtC,CAAjB;AACAX,MAAI,CAACY,QAAL,CAAcP,QAAd;AACAT,gBAAc,CAACiB,GAAf,CAAmBb,IAAnB,EAAyB;AAACD,SAAD;AAAQM;AAAR,GAAzB;AACD,CAjBkC,CAA5B","names":["isPrimitive","directive","NodePart","previousValues","WeakMap","unsafeHTML","value","part","Error","previousValue","get","undefined","fragment","template","document","createElement","innerHTML","importNode","content","setValue","set"],"sources":["D:\\web\\Pet_Memories\\client\\my-app\\node_modules\\lit-html\\src\\directives\\unsafe-html.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, NodePart, Part} from '../lit-html.js';\n\ninterface PreviousValue {\n  readonly value: unknown;\n  readonly fragment: DocumentFragment;\n}\n\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap<NodePart, PreviousValue>();\n\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value: unknown) => (part: Part): void => {\n  if (!(part instanceof NodePart)) {\n    throw new Error('unsafeHTML can only be used in text bindings');\n  }\n\n  const previousValue = previousValues.get(part);\n\n  if (previousValue !== undefined && isPrimitive(value) &&\n      value === previousValue.value && part.value === previousValue.fragment) {\n    return;\n  }\n\n  const template = document.createElement('template');\n  template.innerHTML = value as string;  // innerHTML casts to string internally\n  const fragment = document.importNode(template.content, true);\n  part.setValue(fragment);\n  previousValues.set(part, {value, fragment});\n});\n"]},"metadata":{},"sourceType":"module"}